var e=Object.defineProperty,t=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,o=(t,a,r)=>a in t?e(t,a,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[a]=r,i=(e,i)=>{for(var l in i||(i={}))a.call(i,l)&&o(e,l,i[l]);if(t)for(var l of t(i))r.call(i,l)&&o(e,l,i[l]);return e};import{c as l,a as n,l as s,_ as u,d as c,u as p,b as d,r as b,p as m,e as g,f as h,g as T,t as w,w as v,v as y,h as f,i as S,j as P,o as M,k as C,m as k,n as O,F as x,q as D,s as A}from"./vendor.cb42c013.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver((e=>{for(const a of e)if("childList"===a.type)for(const e of a.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)})).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerpolicy&&(t.referrerPolicy=e.referrerpolicy),"use-credentials"===e.crossorigin?t.credentials="include":"anonymous"===e.crossorigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const U=new Worker("./worker.js"),$={autobrewer:{price:10,increaseRate:1.01}},Q={autobrewer:{outputMultiplier:2,costMultiplier:5,nextUpgradeCost:100}},N=100,z=()=>({lastSaveAt:null,lastNotableTickAt:null,tick:0,money:0,cupsOfTea:0,teaPrice:2,teaPerTick:0,rawDemand:N,demandBonuses:{level:1,tastiness:1},purchases:{autobrewer:{count:0,price:$.autobrewer.price,increaseRate:$.autobrewer.increaseRate}},upgrades:{autobrewer:{level:0,currentOutputMultiplier:1,outputMultiplier:Q.autobrewer.outputMultiplier,costMultiplier:Q.autobrewer.costMultiplier,nextUpgradeCost:Q.autobrewer.nextUpgradeCost}},debugMode:!1}),R=l({strict:!1,plugins:[n({key:"teaShopSave",filter:e=>"triggerSave"===e.type})],state:()=>z(),mutations:{tick(e){e.tick+=1},brewTea(e,t=1){e.cupsOfTea+=t},consumeTea(e,t=1){e.cupsOfTea-=t},earnMoney(e,t=1){e.money+=t},spendMoney(e,t=1){e.money-=t},increaseTeaPrice(e,t=.01){e.teaPrice+=t},decreaseTeaPrice(e,t=.01){e.teaPrice-t>=.01?e.teaPrice-=t:(e.teaPrice=.01,console.log("Unable to decrease price any further."))},recalculateRawDemand(e,t=1){e.rawDemand=N*e.demandBonuses.level*e.demandBonuses.tastiness},buyAutobrewer(e,t=1){e.purchases.autobrewer.count+=t},increasePurchasablePrice(e,t){null===t.amount&&(t.amount=1),e.purchases[t.purchasable].price*=Math.pow(e.purchases[t.purchasable].increaseRate,t.amount)},setLastNotableTickAt(e,t){e.lastNotableTickAt=t.datetime},upgradeUpgradable(e,t){e.upgrades[t.upgradable].level+=1,e.upgrades[t.upgradable].currentOutputMultiplier*=e.upgrades[t.upgradable].outputMultiplier,e.upgrades[t.upgradable].nextUpgradeCost*=e.upgrades[t.upgradable].costMultiplier},triggerSave(e){e.lastSaveAt=Date.now()},hardReset(e){null!==localStorage.getItem("teaShopSave")&&localStorage.removeItem("teaShopSave"),R.replaceState(z())},toggleDebugMode(e){e.debugMode=!e.debugMode},recalculateTeaPerTick(e){e.teaPerTick=e.purchases.autobrewer.count*e.upgrades.autobrewer.currentOutputMultiplier/5}},actions:{async startup(e){U.postMessage({name:"startup",tick_rate:200})},async tick(e){U.postMessage({name:"tick",state:s.exports.cloneDeep(e.state),ticks_per_second:5})},brewTea(e){e.commit("brewTea")},sellTea(e,{amount:t}){console.log(`selling ${t} cups of tea`),t<0&&(console.log("Cannot sell negative amounts of tea."),t=0),e.commit("consumeTea",t),e.commit("earnMoney",t*e.state.teaPrice)},upgradeUpgradable(e,{upgradable:t}){e.commit("consumeTea",e.state.upgrades[t].nextUpgradeCost),e.commit("upgradeUpgradable",{upgradable:t}),e.commit("recalculateTeaPerTick")},buyAutobrewer(e,{amount:t}){let a=e.state.purchases.autobrewer.increaseRate,r=e.state.purchases.autobrewer.price*(1-Math.pow(a,t))/(1-a);e.commit("consumeTea",r),e.commit("increasePurchasablePrice",{purchasable:"autobrewer",amount:t}),e.commit("buyAutobrewer",t),e.commit("recalculateTeaPerTick")},autobrew(e){e.commit("brewTea",e.state.teaPerTick)}}});U.onmessage=e=>{"mutation"===e.data.type?void 0===e.data.payload?R.commit(e.data.method):R.commit(e.data.method,e.data.payload):"action"===e.data.type&&(void 0===e.data.payload?R.dispatch(e.data.method):R.dispatch(e.data.method,e.data.payload))};const I=["","Thousand","Million","Billion","Trillion","Quadrillion","Quintillion","Sextillion","Septillion","Octillion","Nonillion","Decillion","Undecillion","Duodecillion","Tredecillion","Quattuordecillion","Quindecillion","Sexdecillion","Septendecillion","Octodecillion","Novemdecillion","Vigintillion","Unvigintillion","Duovigintillion","Tresvigintillion","Quattuorvigintillion","Quinvigintillion","Sesvigintillion","Septemvigintillion","Octovigintillion","Novemvigintillion","Trigintillion","Untrigintillion","Duotrigintillion","Trestrigintillion","Quattuortrigintillion","Quintrigintillion","Sestrigintillion","Septentrigintillion","Octotrigintillion","Noventrigintillion"],V=["","K","M","B","T","Qa","Qi","Sx","Sp","Oc","No","Dc","UDc","DDc","TDc","QaDc","QiDc","SxDc","SpDc","ODc","NDc","Vi","UVi","DVi","TVi","QaVi","QiVi","SxVi","SpVi","OVi","NVi","Tg","UTg","DTg","TTg","QaTg","QiTg","SxTg","SpTg","OTg","NTg"],B={short:!1,lowercase:!1,money:!1};var G=c({name:"Options",setup(e,t){const a=p(),r=d((()=>a.state.lastSaveAt)),o=d((()=>a.state.debugMode)),i=b("Export Save (copies to clipboard)"),l=b(!1),n=()=>{l.value=!l.value},s=b("");return{hardResetGame:()=>{confirm("This will permanently erase ALL your progress, nothing will be persisted. Are you absolutely sure you want to reset your game?")&&a.commit("hardReset")},lastSaveAt:r,debugMode:o,toggleDebugMode:()=>a.commit("toggleDebugMode"),importSave:()=>{n();try{let e=JSON.parse(atob(s.value));a.replaceState(e),s.value=""}catch(e){alert("There was an error with the imported save data. Are you sure you have a valid save?")}},importedSaveText:s,toggleImportTextArea:n,importToggled:l,exportButtonText:i,exportSave:()=>{let e=localStorage.getItem("teaShopSave");null!==e&&navigator.clipboard.writeText(btoa(e)).then((()=>{i.value="Copied!",setTimeout((()=>{i.value="Export Save (copies to clipboard)"}),2e3)}))},saveGame:()=>a.commit("triggerSave")}}});m("data-v-3875dae5");const _=T("h4",null,"Options",-1),j={class:"buttons"},L={class:"import-text-area-container"},E=["disabled"],F=T("p",null,[P("Game by Connor Shea | "),T("a",{href:"https://github.com/connorshea/teashop"},"GitHub")],-1);g(),G.render=function(e,t,a,r,o,i){return M(),h("div",null,[_,T("div",j,[T("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.saveGame&&e.saveGame(...t))}," Save Game "),T("button",{type:"button",onClick:t[1]||(t[1]=(...t)=>e.toggleImportTextArea&&e.toggleImportTextArea(...t))},w(e.importToggled?"Close Import Field":"Import Save"),1),v(T("div",L,[v(T("textarea",{placeholder:"Paste save game data here and hit Enter",onKeypress:t[2]||(t[2]=f(((...t)=>e.importSave&&e.importSave(...t)),["enter"])),"onUpdate:modelValue":t[3]||(t[3]=t=>e.importedSaveText=t)},null,544),[[S,e.importedSaveText]])],512),[[y,e.importToggled]]),T("button",{type:"button",disabled:null===e.lastSaveAt,onClick:t[4]||(t[4]=(...t)=>e.exportSave&&e.exportSave(...t))},w(e.exportButtonText),9,E),T("button",{type:"button",onClick:t[5]||(t[5]=(...t)=>e.hardResetGame&&e.hardResetGame(...t))}," Hard Reset "),T("button",{type:"button",onClick:t[6]||(t[6]=(...t)=>e.toggleDebugMode&&e.toggleDebugMode(...t))},w(!0===e.debugMode?"Disable Debug Mode":"Enable Debug Mode"),1)]),F])},G.__scopeId="data-v-3875dae5";var K=c({name:"TeaShop",components:{Options:G},setup(e,t){const a=p(),r=d((()=>a.state.cupsOfTea)),o=d((()=>Math.round(5*a.state.teaPerTick))),i=d((()=>Math.round(a.state.cupsOfTea))),l=d((()=>a.state.purchases.autobrewer.count)),n=d((()=>a.state.money)),s=d((()=>a.state.teaPrice)),u=d((()=>a.state.teaPrice.toFixed(2))),c=d((()=>(a.state.rawDemand/100*Math.pow(.8/a.state.teaPrice,1.15)).toFixed(2))),b=d((()=>a.state.purchases.autobrewer.price)),m=d((()=>e=>Math.round(b.value*((1-Math.pow(a.state.purchases.autobrewer.increaseRate,e))/(1-a.state.purchases.autobrewer.increaseRate))))),g=d((()=>a.state.upgrades.autobrewer.nextUpgradeCost));return a.dispatch("startup"),{cupsOfTea:r,teaPerSecond:o,roundedCupsOfTea:i,money:n,teaPrice:s,roundedTeaPrice:u,demand:c,autobrewerCount:l,autobrewerCost:b,multipleAutobrewerCost:m,autobrewerUpgradeCost:g,brewTea:()=>a.dispatch("brewTea"),increaseTeaPrice:e=>a.commit("increaseTeaPrice",e),decreaseTeaPrice:e=>a.commit("decreaseTeaPrice",e),buyAutobrewer:e=>a.dispatch("buyAutobrewer",{amount:e}),upgradeAutobrewer:()=>a.dispatch("upgradeUpgradable",{upgradable:"autobrewer"})}}});m("data-v-36621452");const q=T("h1",null,"Tea Shop",-1),H={key:0},J={class:"buttons"},W=["disabled"],X=["disabled"],Y=["disabled"],Z=T("br",null,null,-1),ee=T("h4",null,"Upgrades",-1),te={class:"buttons"},ae=["disabled"],re=T("br",null,null,-1),oe=T("br",null,null,-1);g(),K.render=function(e,t,a,r,o,i){const l=C("Options");return M(),h(x,null,[q,T("p",null,"$"+w(e.$filters.humanize(e.money,{short:!0,money:!0})),1),T("p",null,"Price for a Cup of Tea: $"+w(e.roundedTeaPrice),1),T("p",null,"Demand: "+w(e.demand)+"%",1),T("p",null,w(e.$filters.humanize(e.roundedCupsOfTea,{short:!0}))+" "+w(e.$filters.pluralize(e.roundedCupsOfTea,"Cup"))+" of Tea",1),T("p",null,"("+w(e.$filters.humanize(e.teaPerSecond,{short:!0}))+" "+w(e.$filters.pluralize(e.teaPerSecond,"cup"))+"/sec)",1),e.autobrewerCount>0?(M(),h("p",H,w(e.autobrewerCount)+" "+w(e.$filters.pluralize(e.autobrewerCount,"Autobrewer")),1)):k("",!0),T("div",J,[T("button",{type:"button",onClick:t[0]||(t[0]=(...t)=>e.brewTea&&e.brewTea(...t))}," Brew a cup of tea "),T("button",{type:"button",onClick:t[1]||(t[1]=t=>e.increaseTeaPrice(.1))}," Increase Price of Tea "),T("button",{type:"button",disabled:e.teaPrice-.01<.01,onClick:t[2]||(t[2]=t=>e.decreaseTeaPrice(.1))}," Decrease Price of Tea ",8,W),T("button",{type:"button",disabled:e.cupsOfTea<Math.ceil(e.autobrewerCost),onClick:t[3]||(t[3]=t=>e.buyAutobrewer(1))}," Buy an autobrewer ("+w(e.$filters.humanize(Math.round(e.autobrewerCost),{short:!0}))+" "+w(e.$filters.pluralize(e.autobrewerCost,"cup"))+") ",9,X),T("button",{type:"button",disabled:e.cupsOfTea<Math.ceil(e.multipleAutobrewerCost(10)),onClick:t[4]||(t[4]=t=>e.buyAutobrewer(10))}," Buy 10 autobrewers ("+w(e.$filters.humanize(e.multipleAutobrewerCost(10),{short:!0}))+" "+w(e.$filters.pluralize(e.multipleAutobrewerCost(10),"cup"))+") ",9,Y)]),Z,T("div",null,[ee,T("div",te,[T("button",{type:"button",disabled:e.cupsOfTea<Math.ceil(e.autobrewerUpgradeCost),onClick:t[5]||(t[5]=(...t)=>e.upgradeAutobrewer&&e.upgradeAutobrewer(...t))}," Upgrade autobrewers ("+w(e.$filters.humanize(e.autobrewerUpgradeCost,{short:!0}))+" "+w(e.$filters.pluralize(e.autobrewerUpgradeCost,"cup"))+") ",9,ae)])]),re,oe,O(l)],64)},K.__scopeId="data-v-36621452";var ie=c({name:"App",components:{TeaShop:K}});ie.render=function(e,t,a,r,o,i){const l=C("TeaShop");return M(),D(l)};const le=A(ie);le.use(R),le.config.globalProperties.$filters={},le.config.globalProperties.$filters.pluralize=(e,t,a=null)=>(null===a&&(a=`${t}s`),e>1||0===e?a:t),le.config.globalProperties.$filters.humanize=(e,t)=>{const a=t?i(i({},B),t):B,r=a.short?V:I;return a.money&&e<1e3?e.toFixed(2):u(e,{precision:2,units:r,lowercase:a.lowercase,space:!a.short})},le.mount("#app");
